<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive AWS Savings Plan cost optimization simulator. Visualize savings across different load patterns.">
    <title>AWS Savings Plan Simulator | Interactive Cost Optimizer</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="title">
                    <a href="#" id="title-reset-link" class="title-link">
                        <span class="title-icon">üìä</span>
                        AWS Savings Plan Simulator
                    </a>
                </h1>
                <p class="subtitle">
                    Visualize and optimize your AWS compute costs with interactive Savings Plan scenarios
                </p>
            </div>
        </header>

        <!-- Global Color Theme Selector -->
        <div class="global-theme-selector">
            <label for="color-theme" class="theme-label">Color Theme:</label>
            <select id="color-theme" class="theme-select">
                <option value="default">Default</option>
                <option value="high-contrast">High Contrast</option>
                <option value="protanopia">Protanopia (Red-blind)</option>
                <option value="tritanopia">Tritanopia (Blue-blind)</option>
            </select>
        </div>

        <!-- Main Content -->
        <main class="main-content">

            <!-- Section 1: Workload Pattern & Cost Range -->
            <section class="card section-load-pattern">
                <div class="card-header-with-toggle">
                    <div>
                        <h2 class="section-title">Workload Pattern & Cost Range</h2>
                        <p class="section-description">Define your usage pattern and hourly cost range (min-max $/h)</p>
                    </div>
                    <div class="header-right">
                        <div class="compact-controls hidden">
                            <div class="pattern-selector-compact">
                                <button class="pattern-btn-compact active" data-pattern="ecommerce" type="button" title="E-commerce">
                                    <svg viewBox="0 0 48 24"><polygon class="sparkline-fill" points="0,22 3,21 6,18 9,10 12,5 15,3 18,5 21,14 24,22 27,21 30,18 33,10 36,5 39,3 42,5 45,14 48,22 48,24 0,24"/><polyline class="sparkline-line" points="0,22 3,21 6,18 9,10 12,5 15,3 18,5 21,14 24,22 27,21 30,18 33,10 36,5 39,3 42,5 45,14 48,22"/></svg>
                                </button>
                                <button class="pattern-btn-compact" data-pattern="flat" type="button" title="Flat">
                                    <svg viewBox="0 0 48 24"><polygon class="sparkline-fill" points="0,4 48,4 48,24 0,24"/><polyline class="sparkline-line" points="0,4 48,4"/></svg>
                                </button>
                                <button class="pattern-btn-compact" data-pattern="batch" type="button" title="Batch">
                                    <svg viewBox="0 0 48 24"><polygon class="sparkline-fill" points="0,22 5,22 6,4 7,22 15,22 16,4 17,22 23,22 24,4 25,22 31,22 32,4 33,22 40,22 41,4 42,22 48,22 48,24 0,24"/><polyline class="sparkline-line" points="0,22 5,22 6,4 7,22 15,22 16,4 17,22 23,22 24,4 25,22 31,22 32,4 33,22 40,22 41,4 42,22 48,22"/></svg>
                                </button>
                                <button class="pattern-btn-compact" data-pattern="business-hours" type="button" title="Business">
                                    <svg viewBox="0 0 48 24"><polygon class="sparkline-fill" points="0,20 4,20 6,4 12,4 14,20 18,20 20,4 26,4 28,20 32,20 34,4 40,4 42,20 48,20 48,24 0,24"/><polyline class="sparkline-line" points="0,20 4,20 6,4 12,4 14,20 18,20 20,4 26,4 28,20 32,20 34,4 40,4 42,20 48,20"/></svg>
                                </button>
                                <button class="pattern-btn-compact" data-pattern="random" type="button" title="Random">
                                    <svg viewBox="0 0 48 24"><rect class="icon-shape" x="12" y="0" width="24" height="24" rx="4"/><circle class="icon-shape icon-dot" cx="18" cy="6" r="1.8"/><circle class="icon-shape icon-dot" cx="24" cy="12" r="1.8"/><circle class="icon-shape icon-dot" cx="30" cy="18" r="1.8"/><circle class="icon-shape icon-dot" cx="18" cy="18" r="1.8"/><circle class="icon-shape icon-dot" cx="30" cy="6" r="1.8"/></svg>
                                </button>
                                <button class="pattern-btn-compact" data-pattern="custom-paste" type="button" title="Paste">
                                    <svg viewBox="0 0 48 24"><rect class="icon-shape" x="14" y="2" width="20" height="20" rx="2"/><rect class="icon-shape" x="18" y="0" width="12" height="4" rx="1"/><line class="icon-shape" x1="19" y1="10" x2="29" y2="10"/><line class="icon-shape" x1="19" y1="14" x2="29" y2="14"/><line class="icon-shape" x1="19" y1="18" x2="26" y2="18"/></svg>
                                </button>
                                <button class="pattern-btn-compact" data-pattern="custom-url" type="button" title="From URL">
                                    <svg viewBox="0 0 48 24"><circle class="icon-shape" cx="24" cy="12" r="10"/><ellipse class="icon-shape" cx="24" cy="12" rx="4" ry="10"/><line class="icon-shape" x1="14" y1="12" x2="34" y2="12"/></svg>
                                </button>
                            </div>
                            <div class="contrast-compact">
                                <span class="contrast-compact-label">Contrast</span>
                                <input type="range" id="contrast-slider-compact" class="slider" min="0" max="200" value="100" step="5">
                                <span class="control-value" id="contrast-display-compact">100%</span>
                            </div>
                        </div>
                        <button id="toggle-load-pattern" class="button-toggle" aria-label="Toggle load pattern section">
                            <span class="toggle-icon">‚ñº</span>
                        </button>
                    </div>
                </div>

                <div id="load-pattern-content" class="collapsible-content">
                    <div class="pattern-selector">
                        <button class="pattern-btn active" data-pattern="ecommerce" type="button">
                            <svg class="pattern-sparkline" viewBox="0 0 48 24">
                                <polygon class="sparkline-fill" points="0,22 3,21 6,18 9,10 12,5 15,3 18,5 21,14 24,22 27,21 30,18 33,10 36,5 39,3 42,5 45,14 48,22 48,24 0,24"/>
                                <polyline class="sparkline-line" points="0,22 3,21 6,18 9,10 12,5 15,3 18,5 21,14 24,22 27,21 30,18 33,10 36,5 39,3 42,5 45,14 48,22"/>
                            </svg>
                            <span class="pattern-btn-label">E-commerce</span>
                        </button>
                        <button class="pattern-btn" data-pattern="flat" type="button">
                            <svg class="pattern-sparkline" viewBox="0 0 48 24">
                                <polygon class="sparkline-fill" points="0,4 48,4 48,24 0,24"/>
                                <polyline class="sparkline-line" points="0,4 48,4"/>
                            </svg>
                            <span class="pattern-btn-label">Flat</span>
                        </button>
                        <button class="pattern-btn" data-pattern="batch" type="button">
                            <svg class="pattern-sparkline" viewBox="0 0 48 24">
                                <polygon class="sparkline-fill" points="0,22 5,22 6,4 7,22 15,22 16,4 17,22 23,22 24,4 25,22 31,22 32,4 33,22 40,22 41,4 42,22 48,22 48,24 0,24"/>
                                <polyline class="sparkline-line" points="0,22 5,22 6,4 7,22 15,22 16,4 17,22 23,22 24,4 25,22 31,22 32,4 33,22 40,22 41,4 42,22 48,22"/>
                            </svg>
                            <span class="pattern-btn-label">Batch</span>
                        </button>
                        <button class="pattern-btn" data-pattern="business-hours" type="button">
                            <svg class="pattern-sparkline" viewBox="0 0 48 24">
                                <polygon class="sparkline-fill" points="0,20 4,20 6,4 12,4 14,20 18,20 20,4 26,4 28,20 32,20 34,4 40,4 42,20 48,20 48,24 0,24"/>
                                <polyline class="sparkline-line" points="0,20 4,20 6,4 12,4 14,20 18,20 20,4 26,4 28,20 32,20 34,4 40,4 42,20 48,20"/>
                            </svg>
                            <span class="pattern-btn-label">Business</span>
                        </button>
                        <button class="pattern-btn" data-pattern="random" type="button">
                            <svg class="pattern-icon" viewBox="0 0 48 24">
                                <rect class="icon-shape" x="12" y="0" width="24" height="24" rx="4"/>
                                <circle class="icon-shape icon-dot" cx="18" cy="6" r="1.8"/>
                                <circle class="icon-shape icon-dot" cx="24" cy="12" r="1.8"/>
                                <circle class="icon-shape icon-dot" cx="30" cy="18" r="1.8"/>
                                <circle class="icon-shape icon-dot" cx="18" cy="18" r="1.8"/>
                                <circle class="icon-shape icon-dot" cx="30" cy="6" r="1.8"/>
                            </svg>
                            <span class="pattern-btn-label">Random</span>
                        </button>
                        <button class="pattern-btn" data-pattern="custom-paste" type="button">
                            <svg class="pattern-icon" viewBox="0 0 48 24">
                                <rect class="icon-shape" x="14" y="2" width="20" height="20" rx="2"/>
                                <rect class="icon-shape" x="18" y="0" width="12" height="4" rx="1"/>
                                <line class="icon-shape" x1="19" y1="10" x2="29" y2="10"/>
                                <line class="icon-shape" x1="19" y1="14" x2="29" y2="14"/>
                                <line class="icon-shape" x1="19" y1="18" x2="26" y2="18"/>
                            </svg>
                            <span class="pattern-btn-label">Paste</span>
                        </button>
                        <button class="pattern-btn" data-pattern="custom-url" type="button">
                            <svg class="pattern-icon" viewBox="0 0 48 24">
                                <circle class="icon-shape" cx="24" cy="12" r="10"/>
                                <ellipse class="icon-shape" cx="24" cy="12" rx="4" ry="10"/>
                                <line class="icon-shape" x1="14" y1="12" x2="34" y2="12"/>
                            </svg>
                            <span class="pattern-btn-label">From URL</span>
                        </button>
                    </div>

                    <div class="load-factor-row">
                        <div class="control-group" style="flex: 1;">
                            <label for="contrast-slider" class="control-label">
                                Contrast
                                <span class="control-value" id="contrast-display">100%</span>
                            </label>
                            <input type="range" id="contrast-slider" class="slider" min="0" max="200" value="100" step="5">
                        </div>
                        <button id="toggle-advanced-costs" class="button-toggle-inline" type="button" title="Min/Max Cost">&#9881;</button>
                        <div id="advanced-costs" class="advanced-costs hidden">
                            <div class="control-group">
                                <label for="min-cost" class="control-label">Min $/h</label>
                                <input type="number" id="min-cost" class="number-input" value="15" min="0" max="10000" step="1">
                            </div>
                            <div class="control-group">
                                <label for="max-cost" class="control-label">Max $/h</label>
                                <input type="number" id="max-cost" class="number-input" value="100" min="1" max="10000" step="1">
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <canvas id="load-chart" aria-label="Weekly load pattern chart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Section 2: Cost Comparison Chart (Full Width) -->
            <section class="card section-cost-comparison">
                <div class="card-header">
                    <h2 class="section-title">Cost Breakdown: Coverage vs Actual Usage</h2>
                    <p class="section-description">Move the sliders below to see how coverage and savings affect costs</p>
                </div>

                <!-- Horizontal Metrics Row -->
                <div class="metrics-row">
                    <div class="metric-card highlight">
                        <div class="metric-value" id="metric-commitment">$0.00/h</div>
                        <div class="metric-label">Target Commitment</div>
                        <div class="metric-subvalue" id="metric-commitment-pct">0.0% of on-demand</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="metric-ondemand">$0.00/h</div>
                        <div class="metric-label">Pure On-Demand Cost</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="metric-savingsplan">$0.00/h</div>
                        <div class="metric-label">Total Cost with SP</div>
                        <div class="metric-subvalue" id="metric-breakdown">(Commitment + Spillover)</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="metric-waste">$0.00/h</div>
                        <div class="metric-label">Wasted Commitment</div>
                        <div class="metric-subvalue" id="metric-waste-pct">0.0% of commitment</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="metric-spillover">$0.00/h</div>
                        <div class="metric-label">Spillover Cost</div>
                        <div class="metric-subvalue" id="metric-spillover-pct">0.0% of total</div>
                    </div>
                    <div class="metric-card" id="metric-savings-container">
                        <div class="metric-value-wrapper">
                            <span class="metric-value" id="metric-savings">$0.00/h</span>
                            <div class="metric-savings-tooltip" id="metric-savings-tooltip"></div>
                        </div>
                        <div class="metric-label">Net Savings</div>
                        <div class="metric-subvalue" id="metric-savings-pct">0.0%</div>
                    </div>
                </div>

                <div class="chart-container">
                        <canvas id="cost-chart" aria-label="Cost comparison chart"></canvas>
                    </div>

                    <!-- Sliders in two columns directly below chart -->
                    <div class="sliders-row">
                        <div class="control-group">
                            <label for="coverage-slider" class="control-label">
                                Commitment
                                <span class="control-value" id="coverage-display">$50/h</span>
                            </label>
                            <input type="range" id="coverage-slider" class="slider" min="0" max="100" value="50" step="1" aria-label="Savings Plan commitment in dollars per hour">
                            <div class="control-hint" id="savings-rate">$0.070/h vs $0.100/h On-Demand</div>
                        </div>

                        <div class="control-group">
                            <label for="savings-percentage" class="control-label">
                                Savings Percentage
                                <span class="control-value" id="savings-display">30%</span>
                            </label>
                            <input type="range" id="savings-percentage" class="slider" min="10" max="90" value="30" step="1" aria-label="Savings percentage">
                        </div>
                    </div>

                    <!-- Commitment Strategy Buttons -->
                    <div class="sliders-row">
                        <div class="strategy-container">
                            <div class="strategy-buttons">
                                <button class="strategy-button strategy-warning" data-strategy="too-prudent" id="strategy-too-prudent">
                                    <div class="strategy-icon">üêî</div>
                                    <div class="strategy-content">
                                        <div class="strategy-name">Prudent</div>
                                        <div class="strategy-desc">Under-committed</div>
                                        <div class="strategy-metrics">
                                            <div class="strategy-metric-col">
                                                <div class="strategy-metric-label">SP Coverage / h</div>
                                                <div class="strategy-value" id="strategy-too-prudent-value">$0.00/h</div>
                                                <div class="strategy-min-hourly-pct" id="strategy-too-prudent-min-hourly-pct">100.0% Min-Hourly</div>
                                            </div>
                                            <div class="strategy-metric-col">
                                                <div class="strategy-metric-label">Savings / h</div>
                                                <div class="strategy-savings-amount">
                                                    <span id="strategy-too-prudent-savings">$0.00/h</span>
                                                    <div class="strategy-savings-tooltip" id="strategy-too-prudent-savings-tooltip"></div>
                                                </div>
                                                <div class="strategy-savings-pct" id="strategy-too-prudent-savings-pct">0.0%</div>
                                            </div>
                                        </div>
                                    </div>
                                </button>
                                <button class="strategy-button" data-strategy="min-hourly" id="strategy-min">
                                    <div class="strategy-icon">üõ°Ô∏è</div>
                                    <div class="strategy-content">
                                        <div class="strategy-name">Min-Hourly</div>
                                        <div class="strategy-desc">Baseline only</div>
                                        <div class="strategy-metrics">
                                            <div class="strategy-metric-col">
                                                <div class="strategy-metric-label">SP Coverage / h</div>
                                                <div class="strategy-value" id="strategy-min-value">$0.00/h</div>
                                                <div class="strategy-min-hourly-pct" id="strategy-min-min-hourly-pct">100.0% Min-Hourly</div>
                                            </div>
                                            <div class="strategy-metric-col">
                                                <div class="strategy-metric-label">Savings / h</div>
                                                <div class="strategy-savings-amount">
                                                    <span id="strategy-min-savings">$0.00/h</span>
                                                    <div class="strategy-savings-tooltip" id="strategy-min-savings-tooltip"></div>
                                                </div>
                                                <div class="strategy-savings-pct" id="strategy-min-savings-pct">0.0%</div>
                                            </div>
                                        </div>
                                    </div>
                                </button>
                                <button class="strategy-button strategy-recommended" data-strategy="balanced" id="strategy-balanced">
                                    <div class="strategy-icon">‚öñÔ∏è</div>
                                    <div class="strategy-content">
                                        <div class="strategy-name">Balanced</div>
                                        <div class="strategy-desc">Knee point</div>
                                        <div class="strategy-metrics">
                                            <div class="strategy-metric-col">
                                                <div class="strategy-metric-label">SP Coverage / h</div>
                                                <div class="strategy-value" id="strategy-balanced-value">$0.00/h</div>
                                                <div class="strategy-min-hourly-pct" id="strategy-balanced-min-hourly-pct">100.0% Min-Hourly</div>
                                            </div>
                                            <div class="strategy-metric-col">
                                                <div class="strategy-metric-label">Savings / h</div>
                                                <div class="strategy-savings-amount">
                                                    <span id="strategy-balanced-savings">$0.00/h</span>
                                                    <div class="strategy-savings-tooltip" id="strategy-balanced-savings-tooltip"></div>
                                                </div>
                                                <div class="strategy-savings-pct" id="strategy-balanced-savings-pct">0.0%</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="strategy-badge">RECOMMENDED</div>
                                </button>
                                <button class="strategy-button" data-strategy="aggressive" id="strategy-aggressive">
                                    <div class="strategy-icon">‚ö†Ô∏è</div>
                                    <div class="strategy-content">
                                        <div class="strategy-name">Risky</div>
                                        <div class="strategy-desc">Max savings</div>
                                        <div class="strategy-metrics">
                                            <div class="strategy-metric-col">
                                                <div class="strategy-metric-label">SP Coverage / h</div>
                                                <div class="strategy-value" id="strategy-aggressive-value">$0.00/h</div>
                                                <div class="strategy-min-hourly-pct" id="strategy-aggressive-min-hourly-pct">100.0% Min-Hourly</div>
                                            </div>
                                            <div class="strategy-metric-col">
                                                <div class="strategy-metric-label">Savings / h</div>
                                                <div class="strategy-savings-amount">
                                                    <span id="strategy-aggressive-savings">$0.00/h</span>
                                                    <div class="strategy-savings-tooltip" id="strategy-aggressive-savings-tooltip"></div>
                                                </div>
                                                <div class="strategy-savings-pct" id="strategy-aggressive-savings-pct">0.0%</div>
                                            </div>
                                        </div>
                                    </div>
                                </button>
                                <button class="strategy-button strategy-warning" data-strategy="too-aggressive" id="strategy-too-aggressive">
                                    <div class="strategy-icon">üíÄ</div>
                                    <div class="strategy-content">
                                        <div class="strategy-name">Aggressive</div>
                                        <div class="strategy-desc">Over-committed</div>
                                        <div class="strategy-metrics">
                                            <div class="strategy-metric-col">
                                                <div class="strategy-metric-label">SP Coverage / h</div>
                                                <div class="strategy-value" id="strategy-too-aggressive-value">$0.00/h</div>
                                                <div class="strategy-min-hourly-pct" id="strategy-too-aggressive-min-hourly-pct">100.0% Min-Hourly</div>
                                            </div>
                                            <div class="strategy-metric-col">
                                                <div class="strategy-metric-label">Savings / h</div>
                                                <div class="strategy-savings-amount">
                                                    <span id="strategy-too-aggressive-savings">$0.00/h</span>
                                                    <div class="strategy-savings-tooltip" id="strategy-too-aggressive-savings-tooltip"></div>
                                                </div>
                                                <div class="strategy-savings-pct" id="strategy-too-aggressive-savings-pct">0.0%</div>
                                            </div>
                                        </div>
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

            <!-- Section 3: Savings Optimization Chart -->
            <section class="card section-savings-curve">
                <div class="card-header">
                    <h2 class="section-title">Savings vs Commitment Level</h2>
                    <p class="section-description">Net savings (% of baseline cost) at different commitment levels - zoomed to viable range</p>
                </div>

                <!-- Chart and Load Factor Control -->
                <div class="curve-with-control">
                    <div class="chart-container">
                        <canvas id="savings-curve-chart" aria-label="Savings curve optimization chart"></canvas>
                    </div>

                    <div class="curve-control-column">
                        <button class="reset-load-factor" id="reset-load-factor" title="Reset to 100%">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                                <path d="M21 3v5h-5"/>
                                <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                                <path d="M3 21v-5h5"/>
                            </svg>
                        </button>
                        <div class="curve-vertical-control">
                            <div class="control-group">
                                <label for="load-factor" class="control-label">
                                    Load Factor
                                    <span class="control-value" id="load-factor-display">100%</span>
                                </label>
                                <input type="range" id="load-factor" class="slider slider-vertical" min="1" max="150" value="100" step="1" aria-label="Load factor percentage" orient="vertical">
                                <div class="control-hint" id="load-factor-hint">Original usage level</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="curve-legend">
                    <div class="legend-item">
                        <span class="legend-color" id="legend-building"></span>
                        <span class="legend-text">Building to baseline</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" id="legend-gaining"></span>
                        <span class="legend-text">Extra savings</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" id="legend-wasting"></span>
                        <span class="legend-text">Declining savings</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" id="legend-veryBad"></span>
                        <span class="legend-text">Below baseline</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" id="legend-losingMoney"></span>
                        <span class="legend-text">Losing money</span>
                    </div>
                </div>
            </section>

        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="https://github.com/etiennechabert/terraform-aws-sp-autopilot" target="_blank" rel="noopener" class="footer-link">
                        <span class="footer-link-icon">‚öôÔ∏è</span>
                        Deploy with Terraform
                    </a>
                    <a href="https://github.com/etiennechabert/terraform-aws-sp-autopilot#readme" target="_blank" rel="noopener" class="footer-link">
                        <span class="footer-link-icon">üìñ</span>
                        Documentation
                    </a>
                    <a href="https://github.com/etiennechabert/terraform-aws-sp-autopilot" target="_blank" rel="noopener" class="footer-link">
                        <span class="footer-link-icon">‚≠ê</span>
                        Star on GitHub
                    </a>
                </div>
                <p class="footer-text">
                    Built for the <strong><a href="https://github.com/etiennechabert/terraform-aws-sp-autopilot" target="_blank" rel="noopener" style="color: inherit; text-decoration: none; border-bottom: 1px dotted currentColor;">terraform-aws-sp-autopilot</a></strong> project<br>
                    <span style="opacity: 0.7; font-size: 0.9em;">Open source on GitHub | Apache License 2.0</span>
                </p>
            </div>
        </footer>
    </div>

    <!-- Custom Data Modal -->
    <div id="custom-data-modal" class="modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content">
            <h3 id="modal-title" class="modal-title">Load Real Usage Data</h3>
            <p class="modal-description">Run this AWS CLI command to export your Savings Plans coverage data, then paste the output below.</p>

            <div class="modal-cli-block">
                <div class="modal-cli-header">
                    <span class="modal-cli-label">AWS CLI</span>
                    <button id="modal-copy-btn" class="modal-copy-btn" type="button">Copy</button>
                </div>
                <pre class="modal-cli-code"><code id="modal-cli-command"></code></pre>
            </div>

            <textarea id="modal-textarea" class="modal-textarea" rows="4" placeholder="Paste the JSON array here, e.g. [58.00, 54.02, 53.52, ...]"></textarea>
            <div id="modal-error" class="modal-error hidden"></div>

            <div class="modal-disclaimer">
                This provides a rough estimation only (default 30% discount, no SP type breakdown).
                For accurate analysis, deploy the <a href="https://github.com/etiennechabert/terraform-aws-sp-autopilot" target="_blank" rel="noopener">terraform-aws-sp-autopilot</a> reporter which generates a precise, pre-filled link.
            </div>

            <div class="modal-actions">
                <button id="modal-cancel-btn" class="modal-btn modal-btn-cancel" type="button">Cancel</button>
                <button id="modal-load-btn" class="modal-btn modal-btn-load" type="button">Load Data</button>
            </div>
        </div>
    </div>

    <!-- No URL Data Modal -->
    <div id="no-url-data-modal" class="modal-backdrop hidden" role="dialog" aria-modal="true">
        <div class="modal-content">
            <h3 class="modal-title">No Usage Data in URL</h3>
            <p class="modal-description">
                The current URL does not contain any usage data. This option only works when you arrive from
                your personalized report link, generated by the
                <a href="https://github.com/etiennechabert/terraform-aws-sp-autopilot" target="_blank" rel="noopener">terraform-aws-sp-autopilot</a>
                reporter lambda deployed in your AWS account.
            </p>
            <p class="modal-description" style="margin-bottom: 0;">
                Alternatively, use the <strong>Paste</strong> button to manually paste data from the AWS CLI.
            </p>
            <div class="modal-actions">
                <button id="no-url-data-close-btn" class="modal-btn modal-btn-load" type="button">OK</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast" role="alert" aria-live="polite"></div>

    <!-- Scripts -->
    <script src="js/colorThemes.js"></script>
    <script src="js/loadPatterns.js"></script>
    <script src="js/spCalculations.js"></script>
    <script src="js/costCalculator.js"></script>
    <script src="js/urlState.js"></script>
    <script src="js/chartManager.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
