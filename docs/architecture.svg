<?xml version="1.0" encoding="utf-8"?>
<svg width="1200" height="700" xmlns="http://www.w3.org/2000/svg" xmlns:bx="https://boxy-svg.com">
  <defs>
    <linearGradient id="lambdaGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0" style="stop-color:#FF9900;stop-opacity:1"/>
      <stop offset="1" style="stop-color:#FF7700;stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="sqsGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0" style="stop-color:#FF4F8B;stop-opacity:1"/>
      <stop offset="1" style="stop-color:#D63384;stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="eventBridgeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0" style="stop-color:#E7157B;stop-opacity:1"/>
      <stop offset="1" style="stop-color:#C4135A;stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="apiGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0" style="stop-color:#527FFF;stop-opacity:1"/>
      <stop offset="1" style="stop-color:#3259D6;stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="snsGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0" style="stop-color:#D13212;stop-opacity:1"/>
      <stop offset="1" style="stop-color:#A82810;stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="s3Grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0" style="stop-color:#569A31;stop-opacity:1"/>
      <stop offset="1" style="stop-color:#4A7F2A;stop-opacity:1"/>
    </linearGradient>
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#232F3E"/>
    </marker>
    <marker id="arrowheadRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#D13212"/>
    </marker>
    <marker id="arrowheadGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#569A31"/>
    </marker>
    <bx:export>
      <bx:file format="svg" path="Sans titre.svg"/>
    </bx:export>
  </defs>
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#232F3E" style="white-space: pre;">
    AWS Savings Plans Automation - Architecture Flow
  </text>
  <text x="600" y="52" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666" style="white-space: pre;">
    Compute &amp; Database Savings Plans | Automated Analysis → Review → Purchase
  </text>
  <text x="30" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FF9900" style="white-space: pre;" transform="matrix(1, 0, 0, 1, -1.95122, -11.05692)"><tspan x="30" dy="1em">​</tspan>    ① ANALYSIS<tspan x="30" dy="1em">​</tspan>  </text>
  <rect x="50" y="105" width="160" height="75" rx="8" fill="url(#eventBridgeGrad)" stroke="#232F3E" stroke-width="2" filter="url(#shadow)"/>
  <text x="130" y="132" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" style="white-space: pre;">EventBridge</text>
  <text x="130" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">Monthly Trigger</text>
  <text x="130" y="168" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white" style="white-space: pre;">(1st of month)</text>
  <rect x="260" y="95" width="180" height="95" rx="8" fill="url(#lambdaGrad)" stroke="#232F3E" stroke-width="2" filter="url(#shadow)"/>
  <text x="350" y="122" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="white" style="white-space: pre;">Scheduler Lambda</text>
  <text x="350" y="142" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">• Analyze usage patterns</text>
  <text x="350" y="159" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">• Get AWS recommendations</text>
  <text x="350" y="176" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">• Calculate purchase needs</text>
  <line x1="210" y1="142" x2="260" y2="142" stroke="#232F3E" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="235" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#232F3E" font-weight="bold" style="white-space: pre;">trigger</text>
  <line x1="442.602" y1="139.398" x2="940" y2="300" stroke="#D13212" stroke-width="2" stroke-dasharray="4,4" style=""/>
  <rect x="490" y="95" width="180" height="95" rx="8" fill="url(#apiGrad)" stroke="#232F3E" stroke-width="2" filter="url(#shadow)"/>
  <text x="580" y="122" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="white" style="white-space: pre;">AWS APIs</text>
  <text x="580" y="142" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">Cost Explorer</text>
  <text x="580" y="159" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">Savings Plans</text>
  <text x="580" y="176" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white" style="white-space: pre;">(Get Recommendations)</text>
  <line x1="440" y1="130" x2="490" y2="130" stroke="#232F3E" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="465" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#232F3E" font-weight="bold" style="white-space: pre;">request</text>
  <line x1="490" y1="155" x2="440" y2="155" stroke="#232F3E" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="465" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#232F3E" font-weight="bold" style="white-space: pre;">coverage data</text>
  <text x="30" y="245" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FF4F8B" style="white-space: pre;"><tspan x="30" dy="1em">​</tspan>    ② REVIEW TIME<tspan x="30" dy="1em">​</tspan>  </text>
  <line x1="441.301" y1="600.251" x2="942.602" y2="359.349" stroke="#D13212" stroke-width="2" stroke-dasharray="4,4" style=""/>
  <line x1="439.35" y1="458.301" x2="940" y2="340" stroke="#D13212" stroke-width="2" stroke-dasharray="4,4" style=""/>
  <rect x="260" y="260" width="180" height="90" rx="8" fill="url(#sqsGrad)" stroke="#232F3E" stroke-width="2" filter="url(#shadow)"/>
  <text x="350" y="287" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="white" style="white-space: pre;">SQS Queue</text>
  <text x="350" y="307" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">Purchase Intent Messages</text>
  <text x="350" y="324" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white" style="white-space: pre;">Review period: 1st → 4th</text>
  <text x="350" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-style="italic" fill="white" style="white-space: pre;">Delete messages to cancel</text>
  <line x1="350" y1="190" x2="350" y2="260" stroke="#232F3E" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="365" y="225" font-family="Arial, sans-serif" font-size="9" fill="#232F3E" font-weight="bold" style="white-space: pre;">queue tasks</text>
  <rect x="490" y="270" width="160" height="70" rx="8" fill="url(#sqsGrad)" stroke="#232F3E" stroke-width="2" filter="url(#shadow)"/>
  <text x="570" y="297" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" style="white-space: pre;">Dead Letter Queue</text>
  <text x="570" y="317" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">Failed Messages</text>
  <text x="570" y="332" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" style="white-space: pre;">(Max retries exceeded)</text>
  <line x1="440" y1="305" x2="490" y2="305" stroke="#D13212" stroke-width="2.5" marker-end="url(#arrowheadRed)" stroke-dasharray="5,5"/>
  <text x="465" y="298" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#D13212" font-weight="bold" style="white-space: pre;">errors</text>
  <text x="30" y="405" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FF9900" style="white-space: pre;" transform="matrix(1, 0, 0, 1, -1.95122, -13.658537)"><tspan x="30" dy="1em">​</tspan>    ③ AUTO PURCHASE<tspan x="30" dy="1em">​</tspan>  </text>
  <rect x="50" y="420" width="160" height="75" rx="8" fill="url(#eventBridgeGrad)" stroke="#232F3E" stroke-width="2" filter="url(#shadow)"/>
  <text x="130" y="447" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" style="white-space: pre;">EventBridge</text>
  <text x="130" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">Monthly Trigger</text>
  <text x="130" y="483" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white" style="white-space: pre;">(4th of month)</text>
  <rect x="260" y="410" width="180" height="95" rx="8" fill="url(#lambdaGrad)" stroke="#232F3E" stroke-width="2" filter="url(#shadow)"/>
  <text x="350" y="437" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="white" style="white-space: pre;">Purchaser Lambda</text>
  <text x="350" y="457" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">• Poll queue messages</text>
  <text x="350" y="474" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">• Validate coverage cap</text>
  <text x="350" y="491" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">• Execute purchases</text>
  <line x1="210" y1="457" x2="260" y2="457" stroke="#232F3E" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="235" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#232F3E" font-weight="bold" style="white-space: pre;">trigger</text>
  <line x1="350" y1="350" x2="350" y2="410" stroke="#232F3E" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="365" y="380" font-family="Arial, sans-serif" font-size="9" fill="#232F3E" font-weight="bold" style="white-space: pre;">poll &amp; process</text>
  <rect x="490" y="410" width="180" height="95" rx="8" fill="url(#apiGrad)" stroke="#232F3E" stroke-width="2" filter="url(#shadow)"/>
  <text x="580" y="437" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="white" style="white-space: pre;">Savings Plans API</text>
  <text x="580" y="457" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">CreateSavingsPlan</text>
  <text x="580" y="474" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">Commit to Savings</text>
  <text x="580" y="491" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white" style="white-space: pre;">(Compute &amp; Database)</text>
  <line x1="440" y1="457" x2="490" y2="457" stroke="#232F3E" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="465" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#232F3E" font-weight="bold" style="white-space: pre;">purchase</text>
  <text x="30" y="570" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#569A31" style="white-space: pre;">
    ④ REPORTING
  </text>
  <rect x="260" y="555" width="180" height="85" rx="8" fill="url(#lambdaGrad)" stroke="#232F3E" stroke-width="2" filter="url(#shadow)"/>
  <text x="350" y="582" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="white" style="white-space: pre;">Reporter Lambda</text>
  <text x="350" y="602" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">• Generate coverage reports</text>
  <text x="350" y="619" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">• Track savings realized</text>
  <text x="350" y="633" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-style="italic" style="white-space: pre;">(Optional - Weekly/Monthly)</text>
  <rect x="490" y="565" width="160" height="65" rx="8" fill="url(#s3Grad)" stroke="#232F3E" stroke-width="2" filter="url(#shadow)"/>
  <text x="570" y="592" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" style="white-space: pre;">S3 Bucket</text>
  <text x="570" y="612" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">Coverage Reports</text>
  <text x="570" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" style="white-space: pre;">(HTML/PDF/JSON)</text>
  <line x1="440" y1="597" x2="490" y2="597" stroke="#569A31" stroke-width="2.5" marker-end="url(#arrowheadGreen)"/>
  <text x="465" y="590" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#569A31" font-weight="bold" style="white-space: pre;">store</text>
  <rect x="940" y="260" width="210" height="130" rx="8" fill="url(#snsGrad)" stroke="#232F3E" stroke-width="2" filter="url(#shadow)"/>
  <text x="1045" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" style="white-space: pre;">SNS Notifications</text>
  <text x="1045" y="315" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" style="white-space: pre;">Email Alerts:</text>
  <text x="1045" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">• Purchase scheduled</text>
  <text x="1045" y="352" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">• Purchase executed</text>
  <text x="1045" y="369" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white" style="white-space: pre;">• Errors &amp; failures</text>
  <text x="1045" y="383" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-style="italic" style="white-space: pre;">(+ optional report emails)</text>
  <line x1="670" y1="305" x2="940" y2="320" stroke="#D13212" stroke-width="2" stroke-dasharray="4,4"/>
  <text x="65" y="680" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#232F3E" style="white-space: pre;">Legend:</text>
  <line x1="130" y1="675" x2="170" y2="675" stroke="#232F3E" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="175" y="680" font-family="Arial, sans-serif" font-size="10" fill="#232F3E" style="white-space: pre;">Data Flow</text>
  <line x1="260" y1="675" x2="300" y2="675" stroke="#D13212" stroke-width="2" stroke-dasharray="4,4"/>
  <text x="305" y="680" font-family="Arial, sans-serif" font-size="10" fill="#232F3E" style="white-space: pre;">Notifications</text>
  <line x1="400" y1="675" x2="440" y2="675" stroke="#D13212" stroke-width="2.5" stroke-dasharray="5,5" marker-end="url(#arrowheadRed)"/>
  <text x="445" y="680" font-family="Arial, sans-serif" font-size="10" fill="#232F3E" style="white-space: pre;">Error Handling</text>
</svg>